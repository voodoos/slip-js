{"version":3,"sources":["src/modules/engine.mjs","src/modules/controller.mjs","src/modules/slip.mjs","src/modules/presentation.mjs","src/modules/util.mjs","src/slip-lib.js"],"names":["document","body","style","cursor","timeOutIds","addEventListener","ev","forEach","id","clearTimeout","push","setTimeout","openWindow","browserHeight","openWindowWidth","browserWidth","openWindowHeight","winX","winY","currentScale","currentRotate","querySelector","universe","slips","querySelectorAll","getOpenWindowHeight","getOpenWindowWidth","moveWindow","x","y","scale","rotate","delay","console","log","transitionDuration","left","top","transform","moveWindowRelative","dx","dy","dscale","drotate","placeSlips","posX","posY","slip","parseFloat","getAttribute","isNaN","setAttribute","classList","contains","zIndex","transformOrigin","placeOpenWindow","window","innerHeight","innerWidth","Math","floor","right","width","bottom","height","parseInt","ng","pres","engine","getEngine","setEngine","presentation","getPresentation","setPresentation","speedMove","key","refresh","canvas","shiftKey","nextSlip","next","previousSlip","previous","name","actionL","present","options","element","outerHTML","initialHTML","innerHTML","currentX","currentY","query","quer","queryAll","actionList","actionIndex","setActionIndex","actionI","getActionIndex","setAction","setNthAction","n","action","hideAndShow","elem","split","map","str","includes","opacity","add","remove","visibAt","staticAt","position","visibility","getMaxNext","moveDownTo","moveUpTo","moveCenterTo","firstVisit","init","whenLeaving","hljs","block","highlightBlock","MathJax","typeset","Hub","Typeset","selector","offset","d","offsetTop","offsetHeight","reveal","revealAll","hide","hideAll","maxTemp","length","attr","strMax","max","abs","ls","Array","from","Slip","getCpt","getSlips","findIndex","getCurrentSlip","setCpt","cpt","innerText","toRoman","num","result","decimal","roman","i","listSlips","slipIndex","setSlips","gotoSlip","gotoSlipIndex","index","visited","flag","skipSlip","saveCpt","start","parseAndFormat","presentationElement","slipElem","layerX","layerY","getAnchor","currentUrl","urlParts","URL","anchor","Engine","Presentation","controller","Controller","IEngine","IController","IPresentation","ISlip","Util","IUtil"],"mappings":"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","file":"slip-lib.js","sourceRoot":"..","sourcesContent":["export default function() {\n    // Constants\n    document.body.style.cursor = \"auto\";\n    let timeOutIds = [];\n    document.body.addEventListener(\"mousemove\", (ev) => {\n\ttimeOutIds.forEach((id) => { clearTimeout(id); });\n\tdocument.body.style.cursor = \"auto\";\n\ttimeOutIds.push(setTimeout(() => { document.body.style.cursor = \"none\";}, 5000));\n    });\n    let openWindow = document.querySelector(\"#open-window\");\n    let universe = document.querySelector(\"#universe\");\n    let slips = universe.querySelectorAll(\".slip\");\n    let browserHeight, openWindowWidth;\n    let browserWidth, openWindowHeight;\n    this.getOpenWindowHeight = () => openWindowHeight;\n    this.getOpenWindowWidth = () => openWindowWidth;\n\n    let winX, winY;\n    let currentScale, currentRotate;\n\n    this.moveWindow = function (x, y, scale, rotate, delay) {\n\tconsole.log(\"move to\", x, y, \"with scale, rotate, delay\", scale, rotate, delay);\n\tcurrentScale = scale;\n\tcurrentRotate = rotate;\n\twinX = x ;\n\twinY = y;\n\tconsole.log(x,y);\n\tsetTimeout(() => {\n\t    document.querySelector(\".scale-container\").style.transitionDuration = delay+\"s\";\n\t    document.querySelector(\".rotate-container\").style.transitionDuration = delay+\"s\";\n\t    universe.style.transitionDuration = delay+\"s, \"+delay+ \"s\"; \n\t    universe.style.left = -(x*1440 - 1440/2)+\"px\";\n\t    universe.style.top = -(y*1080 - 1080/2)+\"px\";\n\t    document.querySelector(\".scale-container\").style.transform = \"scale(\"+(1/scale)+\")\";\n\t    document.querySelector(\".rotate-container\").style.transform = \"rotate(\"+(rotate)+\"deg)\";\n\t},0);\n    };\n    this.moveWindowRelative = function(dx, dy, dscale, drotate, delay) {\n\tthis.moveWindow(winX+dx, winY+dy, currentScale+dscale, currentRotate+drotate, delay);\n    };\n    this.placeSlips = function () {\n\tlet posX = 0.5;\n\tlet posY = 0.5;\n\tslips.forEach((slip) => {\n\t    let x=parseFloat(slip.getAttribute(\"pos-x\")), y=parseFloat(slip.getAttribute(\"pos-y\"));\n\t    let scale = parseFloat(slip.getAttribute(\"scale\"));\n\t    let rotate = 0;\n\t    scale = isNaN(scale) ? 1 : scale ;\n\t    x = (isNaN(x) ? posX : x);\n\t    y = (isNaN(y) ? posY : y);\n\t    slip.setAttribute(\"pos-x\", x);\n\t    slip.setAttribute(\"pos-y\", y);\n\t    slip.setAttribute(\"scale\", scale);\n\t    slip.setAttribute(\"rotate\", rotate);\n\t    posX = x + 1;\n\t    posY = y;\n\t    slip.style.top = (y*1080 - 1080/2)+\"px\";\n\t    slip.style.left = (x*1440 - 1440/2)+\"px\";\n\t    if(!slip.classList.contains(\"permanent\"))\n\t\tslip.style.zIndex = \"-1\";\n\t    slip.style.transformOrigin = \"50% 50%\";\n\t    slip.style.transform = \"scale(\"+scale+\")\";\n\n\t});\t\n    };\n    this.placeSlips();\n    this.placeOpenWindow = function () {\n\tbrowserHeight = window.innerHeight;\n\tbrowserWidth = window.innerWidth;\n\tif(browserHeight/3 < browserWidth/4) {\n\t    openWindowWidth = Math.floor((browserHeight*4)/3);\n\t    openWindowHeight = browserHeight;\n\t    openWindow.style.left = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.right = ((window.innerWidth - openWindowWidth) /2)+\"px\";\n\t    openWindow.style.width = (openWindowWidth)+\"px\";\n\t    openWindow.style.top = \"0\";\n\t    openWindow.style.bottom = \"0\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t}\n\telse {\n\t    openWindowHeight = Math.floor((browserWidth*3)/4);\n\t    openWindowWidth = browserWidth;\n\t    openWindow.style.top = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.bottom = ((window.innerHeight - openWindowHeight) /2)+\"px\";\n\t    openWindow.style.height = (openWindowHeight)+\"px\";\n\t    openWindow.style.right = \"0\";\n\t    openWindow.style.left = \"0\";\n\t    openWindow.style.width = openWindowWidth+\"px\";\n\t}\n\tdocument.querySelector(\".scale-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".rotate-container\").style.transformOrigin = (1440/2)+\"px \"+(1080/2)+\"px\";\n\tdocument.querySelector(\".format-container\").style.transform = \"scale(\"+(openWindowWidth/1440)+\")\";\n\tdocument.querySelector(\".cpt-slip\").style.right =  (parseInt(openWindow.style.left)) + \"px\";\n\tdocument.querySelector(\".cpt-slip\").style.bottom =  \"0\";\n\tdocument.querySelector(\".cpt-slip\").style.zIndex =  \"10\";\n    };\n    this.placeOpenWindow();\n    window.addEventListener(\"resize\", (ev) => {\n\tthis.placeOpenWindow();\n\tthis.moveWindow(winX, winY, currentScale, currentRotate, 0);\n    });\n    \n};","export default function (ng, pres) {\n    let engine = ng;\n    this.getEngine = () => this.engine;\n    this.setEngine = (ng) => this.engine = ng;\n\n    let presentation = pres;\n    this.getPresentation = () => presentation;\n    this.setPresentation = (pres) => presentation = pres;\n\n    let speedMove=1;\n    document.addEventListener(\"keypress\", (ev) => {\n\tif(ev.key == \"f\") { speedMove = (speedMove + 4)%30+1; }    \n\tif(ev.key == \"r\") { presentation.refresh(); }    \n\tif(ev.key == \"#\") {\n\t    document.querySelectorAll(\".slip\").forEach((slip) => {slip.style.zIndex = \"-1\";});\n\t    document.querySelectorAll(\".background-canvas\").forEach((canvas) => {canvas.style.zIndex = \"1\";});\n\t}    \n    });\n    document.addEventListener(\"keydown\", (ev) => {\n\tlet openWindowHeight = engine.getOpenWindowHeight();\n\tlet openWindowWidth = engine.getOpenWindowWidth();\n\tif(ev.key == \"l\") { engine.moveWindowRelative( 0                          ,  (speedMove)/openWindowHeight, 0, 0, 0.1); }   // Bas\n\tif(ev.key == \"o\") { engine.moveWindowRelative( 0                          , -(speedMove)/openWindowHeight, 0, 0, 0.1); }  // Haut\n\tif(ev.key == \"k\") { engine.moveWindowRelative(-(speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Gauche\n\tif(ev.key == \"m\") { engine.moveWindowRelative( (speedMove)/openWindowWidth,  0                           , 0, 0, 0.1); }   // Droite\n\tif(ev.key == \"i\") { engine.moveWindowRelative(0, 0,  0   ,  1, 0.1); }                             // Rotate \n\tif(ev.key == \"p\") { engine.moveWindowRelative(0, 0,  0   , -1, 0.1); }                             // Unrotate\n\tif(ev.key == \"z\") { engine.moveWindowRelative(0, 0,  0.01,  0, 0.1); }                          // Zoom\n\tif(ev.key == \"Z\") { engine.moveWindowRelative(0, 0, -0.01,  0, 0.1); }                          // Unzoom\n\tif(ev.key == \"ArrowRight\") {\n\t    console.log(ev);\n\t    if(ev.shiftKey)\n\t\tpresentation.nextSlip();\n\t    else    \n\t\tpresentation.next();\n\t}\n\telse if (ev.key == \"ArrowLeft\") {\n\t    if(ev.shiftKey)\n\t\tpresentation.previousSlip();\n\t    else    \n\t\tpresentation.previous();\n\t}\n    });  \n    \n};\n","export default function (name, actionL, present, ng, options) {\n    let engine = ng;\n    this.getEngine = () => engine;\n    this.setEngine = (ng) => engine = ng;\n    \n    let presentation = present;\n    this.getPresentation = () => presentation;\n    this.setPresentation = (present) => presentation = present;\n    \n    this.element = document.querySelector(\".slip#\"+name);\n    let initialHTML = this.element.outerHTML;\n    let innerHTML = this.element.innerHTML;\n\n    this.x = parseFloat(this.element.getAttribute(\"pos-x\"));\n    this.y = parseFloat(this.element.getAttribute(\"pos-y\"));\n    this.currentX = this.x;\n    this.currentY = this.y;\n    this.scale = parseFloat(this.element.getAttribute(\"scale\"));\n    this.rotate = parseFloat(this.element.getAttribute(\"rotate\"));\n    this.delay = isNaN(parseFloat(this.element.getAttribute(\"delay\"))) ? 0 : (parseFloat(this.element.getAttribute(\"delay\")));\n\n    this.query = (quer) => this.element.querySelector(quer);\n    this.queryAll = (quer) => this.element.querySelectorAll(quer);\n    let actionList = actionL;\n    let actionIndex=0;\n    this.setActionIndex = (actionI) => actionIndex = actionI;\n    this.getActionIndex = () => actionIndex;\n    this.setAction = (actionL) => {actionList = actionL;};\n    this.setNthAction = (n,action) => {actionList[n] = action;};\n\n    this.hideAndShow = () => {\n\tthis.queryAll(\"*[mk-hidden-at]\").forEach((elem) => {\n\t    let hiddenAt = elem.getAttribute(\"mk-hidden-at\").split(\" \").map((str) => parseInt(str));\n\t    if(hiddenAt.includes(actionIndex))\n\t\telem.style.opacity = \"0\";});\t\n\tthis.queryAll(\"*[mk-visible-at]\").forEach((elem) => {\n\t    let visibleAt = elem.getAttribute(\"mk-visible-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibleAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";});\t\n\tthis.queryAll(\"*[mk-emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"mk-emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");});\t\n\tthis.queryAll(\"*[mk-unemphasize-at]\").forEach((elem) => {\n\t    let unemphAt = elem.getAttribute(\"mk-unemphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(unemphAt.includes(actionIndex))\n\t\telem.classList.remove(\"emphasize\");});\t\n\tthis.queryAll(\"*[emphasize-at]\").forEach((elem) => {\n\t    let emphAt = elem.getAttribute(\"emphasize-at\").split(\" \").map((str) => parseInt(str));\n\t    if(emphAt.includes(actionIndex))\n\t\telem.classList.add(\"emphasize\");\n\t    else\n\t\telem.classList.remove(\"emphasize\");\n\t});\t\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    let visibAt = elem.getAttribute(\"chg-visib-at\").split(\" \").map((str) => parseInt(str));\n\t    if(visibAt.includes(actionIndex))\n\t\telem.style.opacity = \"1\";\n\t    if(visibAt.includes(-actionIndex))\n\t\telem.style.opacity = \"0\";\n\t});\t\n\tthis.queryAll(\"*[static-at]\").forEach((elem) => {\n\t    let staticAt = elem.getAttribute(\"static-at\").split(\" \").map((str) => parseInt(str));\n\t    if(staticAt.includes(-actionIndex)){\n\t\telem.style.position = \"absolute\";\n\t\telem.style.visibility = \"hidden\";\n\t    }\n\t    if(staticAt.includes(actionIndex)) {\n\t\telem.style.position = \"static\";\n\t\telem.style.visibility = \"visible\";\n\t    }\n\t});\t    \n    };\n    \n    this.next = function (presentation) {\n\tif(actionIndex >= this.getMaxNext())\n\t    return false;\n\tactionIndex = actionIndex+1;\n\tthis.hideAndShow();\n\t// setTimeout(() => {\n\t    this.queryAll(\"*[down-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"down-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n//\t\tsetTimeout(() => {\n\t\tthis.moveDownTo(elem, 1);\n//\t\t}, 0);\n\t    });\n\tthis.queryAll(\"*[up-at]\").forEach((elem) => {\n\t    let goTo = elem.getAttribute(\"up-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goTo.includes(actionIndex))\n\t\tthis.moveUpTo(elem, 1);});\n\tthis.queryAll(\"*[center-at]\").forEach((elem) => {\n\t    let goDownTo = elem.getAttribute(\"center-at\").split(\" \").map((str) => parseInt(str));\n\t    if(goDownTo.includes(actionIndex))\n\t\tthis.moveCenterTo(elem, 1);});\n\tif(typeof actionList[actionIndex-1] == \"function\")\n\t    actionList[actionIndex-1](this);\n\t// }, 0);\n\treturn true;\n    };\n    this.firstVisit = () => {\n\tif(options.firstVisit)\n\t    options.firstVisit(this);\n    };\n    this.init = () => {\n\tthis.queryAll(\"*[chg-visib-at]\").forEach((elem) => {\n\t    elem.style.opacity = \"0\";\n\t});\t\n\tthis.queryAll(\"*[static-at]\").forEach((elem) => {\n\t    elem.style.position = \"absolute\";\n\t    elem.style.visibility = \"hidden\";\n\t});\t\n\tthis.hideAndShow();\n\tif(options.init)\n\t    options.init(this);\n    };\n    this.whenLeaving = () => {\n\tif(options.whenLeaving)\n\t    options.whenLeaving(this);\n    };\n\t\n    this.refresh = () => {\n\tthis.setActionIndex(0);\n\tconsole.log(this.element);\n\t// this.element.outerHTML = initialHTML;\n\tthis.element.innerHTML = innerHTML;\n\tif(typeof hljs != \"undefined\")\n\t    document.querySelectorAll('pre code').forEach((block) => {\n\t\thljs.highlightBlock(block);\n\t    });\n\tif(MathJax && typeof MathJax.typeset == \"function\")\n\t    MathJax.typeset();\n\telse if (MathJax && MathJax.Hub && typeof MathJax.Hub.Typeset == \"function\")\n\t    MathJax.Hub.Typeset();\n\tthis.init();\n\tthis.firstVisit();\n\tconsole.log(\"ai\", actionIndex);\n    };\n    this.init(this, presentation, engine);\n    this.moveUpTo = (selector, delay,  offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let d = ((elem.offsetTop)/1080-offset)*this.scale;\n\t    this.currentX = this.x;\n\t    this.currentY = this.y+d;\n\t    engine.moveWindow(this.x, this.y+d, this.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveDownTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0.0125;\n\t    let d = ((elem.offsetTop+elem.offsetHeight)/1080 - 1 + offset)*this.scale;\n\t    this.currentX = this.x;\n\t    this.currentY = this.y+d;\n\t    engine.moveWindow(this.x, this.y+d, this.scale, this.rotate, delay);\n\t},0);\n    };\n    this.moveCenterTo = (selector, delay, offset) => {\n\tsetTimeout(() => {\n\t    let elem;\n\t    if(typeof selector == \"string\") elem = this.query(selector);\n\t    else elem = selector;\n\t    if (typeof offset == \"undefined\") offset = 0;\n\t    let d = ((elem.offsetTop+elem.offsetHeight/2)/1080-1/2+offset)*this.scale;\n\t    this.currentX = this.x;\n\t    this.currentY = this.y+d;\n\t    engine.moveWindow(this.x, this.y+d, this.scale, this.rotate, delay);\n\t},0);\n    };\n    this.reveal = (selector) => {\n\tthis.query(selector).style.opacity = \"1\";\n    };\n    this.revealAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"1\";});\n    };\n    this.hide = (selector) => {\n\tthis.query(selector).style.opacity = \"0\";\n    };\n    this.hideAll = (selector) => {\n\tthis.queryAll(selector).forEach((elem) => { elem.style.opacity = \"0\";});\n    };\n    this.getMaxNext = () => {\n\tlet maxTemp = actionList.length;\n\t[\"mk-visible-at\",\n\t \"mk-hidden-at\",\n\t \"mk-emphasize-at\",\n\t \"mk-unemphasize-at\",\n\t \"emphasize-at\",\n\t \"chg-visib-at\",\n\t \"up-at\",\n\t \"down-at\",\n\t \"center-at\",\n\t \"static-at\",\n\t].forEach((attr) => {\n\t     this.queryAll(\"*[\"+attr+\"]\").forEach((elem) => {\n\t\t elem.getAttribute(attr).split(\" \").forEach((strMax) => {\n\t\t     maxTemp = Math.max(Math.abs(parseInt(strMax)),maxTemp);\n\t\t });\n\t     });\n\t });\n\treturn maxTemp;\t\n    };\n}\n\n\n\n\n\n\n\n\n","import Slip from './slip'\n\nexport default function (ng, ls) {\n    if(!ls)\n\tls = Array.from(document.querySelectorAll(\".slip\")).map((elem) => { return new Slip(elem.id, [], this, ng, {});});\n    console.log(ls);\n    // let cpt = 0;\n    // Taken from https://selftaughtjs.com/algorithm-sundays-converting-roman-numerals\n    // Use in showing roman numbers for slip number\n    function toRoman(num) {\n\tvar result = '';\n\tvar decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];\n\tvar roman = [\"M\", \"CM\",\"D\",\"CD\",\"C\", \"XC\", \"L\", \"XL\", \"X\",\"IX\",\"V\",\"IV\",\"I\"];\n\tfor (var i = 0;i<=decimal.length;i++) {\n\t    while (num%decimal[i] < num) {     \n\t\tresult += roman[i];\n\t\tnum -= decimal[i];\n\t    }\n\t}\n\treturn result;\n    }\n    this.getCpt = () => {\n\treturn [\n\t    this.getSlips().findIndex((slip) => {return slip == this.getCurrentSlip();}),\n\t    this.getCurrentSlip().getActionIndex()\n\t];\n    };\n    this.setCpt = () => {\n\tlet cpt = this.getCpt();\n\tdocument.querySelector(\".cpt-slip\").innerText = (toRoman(cpt[0]+1)+\".\"+(cpt[1]+1));\n    };\n    let engine = ng;\n    this.getEngine = () => this.engine;\n    this.setEngine = (ng) => this.engine = ng;\n    let listSlips = ls || [];\n    let slipIndex = 0;\n    this.getSlips = () => listSlips;\n    this.setSlips = (ls) => listSlips = ls;\n    this.getCurrentSlip = () => listSlips[slipIndex];\n    this.gotoSlip = function(slip, options) {\n\toptions = options ? options : {};\n\tconsole.log(\"options is \", options);\n\t// let x = slip.x, y = slip.y;\n\t// let scale = slip.scale, rotate = slip.rotate, delay = slip.delay;\n\t// console.log(x,y, scale, rotate);\n\tsetTimeout(() => {\n\t    engine.moveWindow(slip.currentX, slip.currentY, slip.scale, slip.rotate, options.delay ? options.delay : slip.delay);\n\t},0);\n    };\n    this.gotoSlipIndex = (index, options) => {\n\t// if(!listSlips[slipIndex].element.classList.contains(\"permanent\"))\n\t//     listSlips[slipIndex].element.style.zIndex = \"-1\";\n\tslipIndex = index;\n\t// listSlips[slipIndex].element.style.zIndex = \"1\";\n\tthis.gotoSlip(listSlips[slipIndex], options);\n\tif(!listSlips[slipIndex].visited) {\n\t    listSlips[slipIndex].visited = true;\n\t    listSlips[slipIndex].firstVisit(this);\n\t}\n    };\n    this.next = () => {\n\t// listSlips[slipIndex].currentCpt = cpt;\n\tlet flag;\n\tif((flag = !listSlips[slipIndex].next(this))) {\n\t    if(slipIndex<listSlips.length-1)\n\t\tthis.gotoSlipIndex(slipIndex+1);\n\t}\n\tthis.setCpt();\n\t//\tcpt++;\n\t// let cpt = this.getCpt();\n\t// document.querySelector(\".cpt-slip\").innerText = (toRoman(cpt[0])+\".\"+(cpt[1]));\n\treturn flag;\n    };\n    this.nextSlip = () => {\n\tif(!this.next())\n\t    this.nextSlip();\n    };\n    this.skipSlip = (options) => {\n\tthis.gotoSlipIndex(slipIndex+1, options);\n\tthis.setCpt();\n    };\n    this.previousSlip = () => {\n\tslipIndex = Math.max(0, slipIndex -1);\n\tthis.gotoSlip(listSlips[slipIndex]);\n\tthis.setCpt();\n\t// cpt = listSlips[slipIndex].currentCpt;\n\t// document.querySelector(\".cpt-slip\").innerText = (cpt);\n    };\n    this.previous = () => {\n\tlet saveCpt = this.getCurrentSlip().getActionIndex();\n\tthis.refresh();\n\tif(saveCpt == 0)\n\t    this.previousSlip();\n\telse\n\t    while(this.getCurrentSlip().getActionIndex()<saveCpt-1)\n\t\tthis.next();\n\tthis.setCpt();\n    };\n    this.refresh = () => {\n\tlistSlips[slipIndex].refresh();\n\tthis.gotoSlip(listSlips[slipIndex]);\n\t// cpt = listSlips[slipIndex].initCpt;\n\t// document.querySelector(\".cpt-slip\").innerText = (cpt);\n\tthis.setCpt();\n    };\n    this.start = () => {\n\tslipIndex = 0;\n\tthis.gotoSlip(listSlips[slipIndex]);\n\tlistSlips[slipIndex].element.style.zIndex = \"1\";\n\tlistSlips[slipIndex].firstVisit(this);\n\t// listSlips[slipIndex].initCpt = cpt;\n\t// listSlips[slipIndex].currentCpt = cpt;\n\tthis.setCpt();\n    };\n};\n","import Engine from './engine'\nimport Controller from './controller.mjs'\nimport Presentation from './presentation'\n\nexport let parseAndFormat = function () {\n    let presentationElement = document.querySelector(\".presentation\");\n    presentationElement.innerHTML =\n'\t<div id=\"open-window\">\\\n\t    <div class=\"format-container\">\\\n\t    <div class=\"rotate-container\">\\\n\t\t<div class=\"scale-container\">\\\n\t\t    <div class=\"universe movable\" id=\"universe\">\\\n\t\t\t<div width=\"10000\" height=\"10000\" class=\"fog\"></div>\\\n\t\t\t<canvas style=\"position:absolute;top:0;left:0;z-index:-2\" width=\"10000\" height=\"10000\" id=\"globalCanvas\" class=\"background-canvas\"></canvas>\\\n' + presentationElement.innerHTML + '\\\n\t\t    </div>\\\n\t\t</div>\\\n\t\t</div>\\\n\t    </div>\\\n\t</div>\\\n\t<div class=\"cpt-slip\">0</div>';\n    presentationElement.querySelectorAll(\".slip\").forEach((slipElem) => {\n\tslipElem.innerHTML = '\\\n    <div class=\"slip-rotate-container\"><canvas style=\"position:absolute;top:0;left:0;z-index:-2\" width=\"1440\" height=\"1080\" class=\"background-canvas\" id=\"canvas-'+slipElem.id+'\"></canvas><div class=\"slip-container\">'+ slipElem.innerHTML + '\\\n</div>';\n    });\n    // document.querySelector(\".globalCanvas\").addEventListener(\"click\", (ev) => { console.log(\"vous avez cliquez aux coordonées : \", ev.layerX, ev.layerY); });\n    document.querySelectorAll(\".background-canvas\").forEach((elem)=> {elem.addEventListener(\"click\", (ev) => { console.log(\"vous avez cliquez aux coordonnées : \", ev.layerX, ev.layerY); });});\n    \n}\n\nexport let getAnchor = function () {\n    var currentUrl = document.URL,\n\turlParts   = currentUrl.split('#');\n\t\t\n    return (urlParts.length > 1) ? urlParts[1] : null;\n}\n\n\n\nexport let init = function () {\n    parseAndFormat();\n\n    let anchor = parseInt(getAnchor());\n    if(anchor) {\n        for(let i=0;i<anchor; i++) {\n        presentation.next();\n        }\n    }\n\n    let engine = new Engine();\n    let presentation = new Presentation(engine);\n    let controller = new Controller(engine, presentation);\n    presentation.start();\n\n    return { engine, presentation, controller }\n}","import IEngine from './modules/engine'\nimport IController from './modules/controller.mjs'\nimport IPresentation from './modules/presentation'\nimport ISlip from './modules/slip'\nimport * as IUtil from './modules/util'\n\n/**\n * Allows slip-js to be used as a module\n */\nexport const Engine = IEngine;\nexport const Controller = IController;\nexport const Presentation = IPresentation;\nexport const Slip = ISlip;\nexport const Util = IUtil;\n\n/**\n * Allows slip-js to be used as simple CDN-included file\n */\nwindow.Engine = IEngine;\nwindow.Controller = IController;\nwindow.Presentation = IPresentation;\nwindow.Slip = ISlip;\nwindow.Util = IUtil;"]}