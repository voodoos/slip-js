parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QyQx":[function(require,module,exports) {
"use strict";function t(){var t=this;document.body.style.cursor="auto";var e=[];document.body.addEventListener("mousemove",function(t){e.forEach(function(t){clearTimeout(t)}),document.body.style.cursor="auto",e.push(setTimeout(function(){document.body.style.cursor="none"},5e3))});var o,n,r,i,s,l,c,a,u=document.querySelector("#open-window"),y=document.querySelector("#universe"),d=y.querySelectorAll(".slip");this.getOpenWindowHeight=function(){return i},this.getOpenWindowWidth=function(){return n},this.moveWindow=function(t,e,o,n,r){console.log("move to",t,e,"with scale, rotate, delay",o,n,r),c=o,a=n,s=t,l=e,console.log(t,e),setTimeout(function(){document.querySelector(".scale-container").style.transitionDuration=r+"s",document.querySelector(".rotate-container").style.transitionDuration=r+"s",y.style.transitionDuration=r+"s, "+r+"s",y.style.left=-(1440*t-720)+"px",y.style.top=-(1080*e-540)+"px",document.querySelector(".scale-container").style.transform="scale("+1/o+")",document.querySelector(".rotate-container").style.transform="rotate("+n+"deg)"},0)},this.moveWindowRelative=function(t,e,o,n,r){this.moveWindow(s+t,l+e,c+o,a+n,r)},this.placeSlips=function(){var t=.5,e=.5;d.forEach(function(o){var n=parseFloat(o.getAttribute("pos-x")),r=parseFloat(o.getAttribute("pos-y")),i=parseFloat(o.getAttribute("scale"));i=isNaN(i)?1:i,n=isNaN(n)?t:n,r=isNaN(r)?e:r,o.setAttribute("pos-x",n),o.setAttribute("pos-y",r),o.setAttribute("scale",i),o.setAttribute("rotate",0),t=n+1,e=r,o.style.top=1080*r-540+"px",o.style.left=1440*n-720+"px",o.classList.contains("permanent")||(o.style.zIndex="-1"),o.style.transformOrigin="50% 50%",o.style.transform="scale("+i+")"})},this.placeSlips(),this.placeOpenWindow=function(){o=window.innerHeight,r=window.innerWidth,o/3<r/4?(n=Math.floor(4*o/3),i=o,u.style.left=(window.innerWidth-n)/2+"px",u.style.right=(window.innerWidth-n)/2+"px",u.style.width=n+"px",u.style.top="0",u.style.bottom="0",u.style.height=i+"px"):(i=Math.floor(3*r/4),n=r,u.style.top=(window.innerHeight-i)/2+"px",u.style.bottom=(window.innerHeight-i)/2+"px",u.style.height=i+"px",u.style.right="0",u.style.left="0",u.style.width=n+"px"),document.querySelector(".scale-container").style.transformOrigin="720px 540px",document.querySelector(".rotate-container").style.transformOrigin="720px 540px",document.querySelector(".format-container").style.transform="scale("+n/1440+")",document.querySelector(".cpt-slip").style.right=parseInt(u.style.left)+"px",document.querySelector(".cpt-slip").style.bottom="0",document.querySelector(".cpt-slip").style.zIndex="10"},this.placeOpenWindow(),window.addEventListener("resize",function(e){t.placeOpenWindow(),t.moveWindow(s,l,c,a,0)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"o2PD":[function(require,module,exports) {
"use strict";function e(e,n){var t=this,i=e;this.getEngine=function(){return t.engine},this.setEngine=function(e){return t.engine=e};var o=n;this.getPresentation=function(){return o},this.setPresentation=function(e){return o=e};var r=1;document.addEventListener("keypress",function(e){"f"==e.key&&(r=(r+4)%30+1),"r"==e.key&&o.refresh(),"#"==e.key&&(document.querySelectorAll(".slip").forEach(function(e){e.style.zIndex="-1"}),document.querySelectorAll(".background-canvas").forEach(function(e){e.style.zIndex="1"}))}),document.addEventListener("keydown",function(e){var n=i.getOpenWindowHeight(),t=i.getOpenWindowWidth();"l"==e.key&&i.moveWindowRelative(0,r/n,0,0,.1),"o"==e.key&&i.moveWindowRelative(0,-r/n,0,0,.1),"k"==e.key&&i.moveWindowRelative(-r/t,0,0,0,.1),"m"==e.key&&i.moveWindowRelative(r/t,0,0,0,.1),"i"==e.key&&i.moveWindowRelative(0,0,0,1,.1),"p"==e.key&&i.moveWindowRelative(0,0,0,-1,.1),"z"==e.key&&i.moveWindowRelative(0,0,.01,0,.1),"Z"==e.key&&i.moveWindowRelative(0,0,-.01,0,.1),"ArrowRight"==e.key?(console.log(e),e.shiftKey?o.nextSlip():o.next()):"ArrowLeft"==e.key&&(e.shiftKey?o.previousSlip():o.previous())})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"onzy":[function(require,module,exports) {
"use strict";function t(t,e,i,n,s){var r=this,o=n;this.getEngine=function(){return o},this.setEngine=function(t){return o=t};var a=i;this.getPresentation=function(){return a},this.setPresentation=function(t){return a=t},this.element=document.querySelector(".slip#"+t);this.element.outerHTML;var u=this.element.innerHTML;this.x=parseFloat(this.element.getAttribute("pos-x")),this.y=parseFloat(this.element.getAttribute("pos-y")),this.currentX=this.x,this.currentY=this.y,this.scale=parseFloat(this.element.getAttribute("scale")),this.rotate=parseFloat(this.element.getAttribute("rotate")),this.delay=isNaN(parseFloat(this.element.getAttribute("delay")))?0:parseFloat(this.element.getAttribute("delay")),this.query=function(t){return r.element.querySelector(t)},this.queryAll=function(t){return r.element.querySelectorAll(t)};var c=e,l=0;this.setActionIndex=function(t){return l=t},this.getActionIndex=function(){return l},this.setAction=function(t){c=t},this.setNthAction=function(t,e){c[t]=e},this.hideAndShow=function(){r.queryAll("*[mk-hidden-at]").forEach(function(t){t.getAttribute("mk-hidden-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&(t.style.opacity="0")}),r.queryAll("*[mk-visible-at]").forEach(function(t){t.getAttribute("mk-visible-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&(t.style.opacity="1")}),r.queryAll("*[mk-emphasize-at]").forEach(function(t){t.getAttribute("mk-emphasize-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&t.classList.add("emphasize")}),r.queryAll("*[mk-unemphasize-at]").forEach(function(t){t.getAttribute("mk-unemphasize-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&t.classList.remove("emphasize")}),r.queryAll("*[emphasize-at]").forEach(function(t){t.getAttribute("emphasize-at").split(" ").map(function(t){return parseInt(t)}).includes(l)?t.classList.add("emphasize"):t.classList.remove("emphasize")}),r.queryAll("*[chg-visib-at]").forEach(function(t){var e=t.getAttribute("chg-visib-at").split(" ").map(function(t){return parseInt(t)});e.includes(l)&&(t.style.opacity="1"),e.includes(-l)&&(t.style.opacity="0")}),r.queryAll("*[static-at]").forEach(function(t){var e=t.getAttribute("static-at").split(" ").map(function(t){return parseInt(t)});e.includes(-l)&&(t.style.position="absolute",t.style.visibility="hidden"),e.includes(l)&&(t.style.position="static",t.style.visibility="visible")})},this.next=function(t){var e=this;return!(l>=this.getMaxNext())&&(l+=1,this.hideAndShow(),this.queryAll("*[down-at]").forEach(function(t){t.getAttribute("down-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&e.moveDownTo(t,1)}),this.queryAll("*[up-at]").forEach(function(t){t.getAttribute("up-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&e.moveUpTo(t,1)}),this.queryAll("*[center-at]").forEach(function(t){t.getAttribute("center-at").split(" ").map(function(t){return parseInt(t)}).includes(l)&&e.moveCenterTo(t,1)}),"function"==typeof c[l-1]&&c[l-1](this),!0)},this.firstVisit=function(){s.firstVisit&&s.firstVisit(r)},this.init=function(){r.queryAll("*[chg-visib-at]").forEach(function(t){t.style.opacity="0"}),r.queryAll("*[static-at]").forEach(function(t){t.style.position="absolute",t.style.visibility="hidden"}),r.hideAndShow(),s.init&&s.init(r)},this.whenLeaving=function(){s.whenLeaving&&s.whenLeaving(r)},this.refresh=function(){r.setActionIndex(0),console.log(r.element),r.element.innerHTML=u,"undefined"!=typeof hljs&&document.querySelectorAll("pre code").forEach(function(t){hljs.highlightBlock(t)}),MathJax&&"function"==typeof MathJax.typeset?MathJax.typeset():MathJax&&MathJax.Hub&&"function"==typeof MathJax.Hub.Typeset&&MathJax.Hub.Typeset(),r.init(),r.firstVisit(),console.log("ai",l)},this.init(this,a,o),this.moveUpTo=function(t,e,i){setTimeout(function(){var n;n="string"==typeof t?r.query(t):t,void 0===i&&(i=.0125);var s=(n.offsetTop/1080-i)*r.scale;r.currentX=r.x,r.currentY=r.y+s,o.moveWindow(r.x,r.y+s,r.scale,r.rotate,e)},0)},this.moveDownTo=function(t,e,i){setTimeout(function(){var n;n="string"==typeof t?r.query(t):t,void 0===i&&(i=.0125);var s=((n.offsetTop+n.offsetHeight)/1080-1+i)*r.scale;r.currentX=r.x,r.currentY=r.y+s,o.moveWindow(r.x,r.y+s,r.scale,r.rotate,e)},0)},this.moveCenterTo=function(t,e,i){setTimeout(function(){var n;n="string"==typeof t?r.query(t):t,void 0===i&&(i=0);var s=((n.offsetTop+n.offsetHeight/2)/1080-.5+i)*r.scale;r.currentX=r.x,r.currentY=r.y+s,o.moveWindow(r.x,r.y+s,r.scale,r.rotate,e)},0)},this.reveal=function(t){r.query(t).style.opacity="1"},this.revealAll=function(t){r.queryAll(t).forEach(function(t){t.style.opacity="1"})},this.hide=function(t){r.query(t).style.opacity="0"},this.hideAll=function(t){r.queryAll(t).forEach(function(t){t.style.opacity="0"})},this.getMaxNext=function(){var t=c.length;return["mk-visible-at","mk-hidden-at","mk-emphasize-at","mk-unemphasize-at","emphasize-at","chg-visib-at","up-at","down-at","center-at","static-at"].forEach(function(e){r.queryAll("*["+e+"]").forEach(function(i){i.getAttribute(e).split(" ").forEach(function(e){t=Math.max(Math.abs(parseInt(e)),t)})})}),t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"tgm4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=e(require("./slip"));function e(t){return t&&t.__esModule?t:{default:t}}function n(e,n){var i=this;n||(n=Array.from(document.querySelectorAll(".slip")).map(function(n){return new t.default(n.id,[],i,e,{})})),console.log(n),this.getCpt=function(){return[i.getSlips().findIndex(function(t){return t==i.getCurrentSlip()}),i.getCurrentSlip().getActionIndex()]},this.setCpt=function(){var t=i.getCpt();document.querySelector(".cpt-slip").innerText=function(t){for(var e="",n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],i=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=0;r<=n.length;r++)for(;t%n[r]<t;)e+=i[r],t-=n[r];return e}(t[0]+1)+"."+(t[1]+1)};var r=e;this.getEngine=function(){return i.engine},this.setEngine=function(t){return i.engine=t};var o=n||[],s=0;this.getSlips=function(){return o},this.setSlips=function(t){return o=t},this.getCurrentSlip=function(){return o[s]},this.gotoSlip=function(t,e){e=e||{},console.log("options is ",e),setTimeout(function(){r.moveWindow(t.currentX,t.currentY,t.scale,t.rotate,e.delay?e.delay:t.delay)},0)},this.gotoSlipIndex=function(t,e){s=t,i.gotoSlip(o[s],e),o[s].visited||(o[s].visited=!0,o[s].firstVisit(i))},this.next=function(){var t;return(t=!o[s].next(i))&&s<o.length-1&&i.gotoSlipIndex(s+1),i.setCpt(),t},this.nextSlip=function(){i.next()||i.nextSlip()},this.skipSlip=function(t){i.gotoSlipIndex(s+1,t),i.setCpt()},this.previousSlip=function(){s=Math.max(0,s-1),i.gotoSlip(o[s]),i.setCpt()},this.previous=function(){var t=i.getCurrentSlip().getActionIndex();if(i.refresh(),0==t)i.previousSlip();else for(;i.getCurrentSlip().getActionIndex()<t-1;)i.next();i.setCpt()},this.refresh=function(){o[s].refresh(),i.gotoSlip(o[s]),i.setCpt()},this.start=function(){s=0,i.gotoSlip(o[s]),o[s].element.style.zIndex="1",o[s].firstVisit(i),i.setCpt()}}
},{"./slip":"onzy"}],"lMLV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=exports.getAnchor=exports.parseAndFormat=void 0;var e=i(require("./engine")),t=i(require("./controller.mjs")),n=i(require("./presentation"));function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e=document.querySelector(".presentation");e.innerHTML='\t<div id="open-window">\t    <div class="format-container">\t    <div class="rotate-container">\t\t<div class="scale-container">\t\t    <div class="universe movable" id="universe">\t\t\t<div width="10000" height="10000" class="fog"></div>\t\t\t<canvas style="position:absolute;top:0;left:0;z-index:-2" width="10000" height="10000" id="globalCanvas" class="background-canvas"></canvas>'+e.innerHTML+'\t\t    </div>\t\t</div>\t\t</div>\t    </div>\t</div>\t<div class="cpt-slip">0</div>',e.querySelectorAll(".slip").forEach(function(e){e.innerHTML='    <div class="slip-rotate-container"><canvas style="position:absolute;top:0;left:0;z-index:-2" width="1440" height="1080" class="background-canvas" id="canvas-'+e.id+'"></canvas><div class="slip-container">'+e.innerHTML+"</div>"}),document.querySelectorAll(".background-canvas").forEach(function(e){e.addEventListener("click",function(e){console.log("vous avez cliquez aux coordonnées : ",e.layerX,e.layerY)})})};exports.parseAndFormat=r;var a=function(){var e=document.URL.split("#");return e.length>1?e[1]:null};exports.getAnchor=a;var o=function(){r();var i=parseInt(a());if(i)for(var o=0;o<i;o++)c.next();var s=new e.default,c=new n.default(s),l=new t.default(s,c);return c.start(),{engine:s,presentation:c,controller:l}};exports.init=o;
},{"./engine":"QyQx","./controller.mjs":"o2PD","./presentation":"tgm4"}],"UkSh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=exports.Slip=exports.Presentation=exports.Controller=exports.Engine=void 0;var e=u(require("./modules/engine")),t=u(require("./modules/controller.mjs")),r=u(require("./modules/presentation")),o=u(require("./modules/slip")),n=l(require("./modules/util"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}var a=e.default;exports.Engine=a;var s=t.default;exports.Controller=s;var p=r.default;exports.Presentation=p;var f=o.default;exports.Slip=f;var d=n;exports.Util=d,window.Engine=e.default,window.Controller=t.default,window.Presentation=r.default,window.Slip=o.default,window.Util=n;
},{"./modules/engine":"QyQx","./modules/controller.mjs":"o2PD","./modules/presentation":"tgm4","./modules/slip":"onzy","./modules/util":"lMLV"}]},{},["UkSh"], null)
//# sourceMappingURL=/slip-js/src/slip-lib.js.map